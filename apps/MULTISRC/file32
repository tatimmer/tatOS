 
;file32  Nov 19, 2015

;Project: MultiSource

;this is the secondary source file

;assemble this file second, then tlink (CTRL+F11)


;this org value must be chosen so as not to overwrite
;any part of the main source file
;look at the dump after assembling main.s
;to determine the code size
org 0x02000200

;each source file should be assigned a unique # from 0->0xff
source 1


;these values are defined in main.s
extern LineX2
extern LineY2



;all public & extern symbols are max 11 bytes

public apple
dd 0x12345678



;input:none
;return:none
public DisplayRect
	mov eax,39  ;rectangle
	mov ebx,100 ;x1
	mov ecx,100 ;y1
	mov edx,300 ;width
	mov esi,300 ;height
	mov edi,BLU
	sysenter
	ret



;input: 
;push xcenter         [ebp+16]
;push ycenter         [ebp+12]
;push color (0->0xff) [ebp+8]
;return:none
public DrawCircle

	push ebp
	mov ebp,esp

	mov eax,40        ;circle
	mov ebx,1         ;filled
	mov ecx,[ebp+16]  ;xcenter
	mov edx,[ebp+12]  ;ycenter
	mov esi,50        ;radius
	mov edi,[ebp+8]   ;color
	sysenter

	pop ebp
	retn 12



;input: 
;push x1  [ebp+20]
;push y1  [ebp+16]
;push x2  [ebp+12]
;push y2  [ebp+8]
;return:none
public DrawLine

	push ebp
	mov ebp,esp

	;just dump the value of two variables
	;that are defined in main.s
	mov eax,3   ;dumreg
	mov ebx,[LineX2]
	mov ecx,[LineY2]
	sysenter
	
	mov eax,30          ;line
	mov ebx,0xffffe1f0  ;linetype
	mov ecx,[ebp+20]    ;x1
	mov edx,[ebp+16]    ;y1
	mov esi,[ebp+12]    ;x2
	mov edi,[ebp+8]     ;y2
	mov ebp,RED         ;color
	sysenter

	pop ebp
	retn 16


        


                  
